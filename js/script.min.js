function audio_control(){1==play_status?(audio.pause(),play_status=!1,document.getElementById("sound_on_off").innerHTML=sound_off):(audio.play(),play_status=!0,document.getElementById("sound_on_off").innerHTML=sound_on)}function redirect(e){switch(e){case 1:window.open("https://saythanks.io/to/lightsout");break;case 2:swal("Bitocin Wallet","1XGr9qbZjBpUQJJSB6WtgBQbDTgrhPLPA");break;case 3:window.open("https://beerpay.io/sepandhaghighi/lightsout");break;case 4:window.open("https://www.payping.ir/sepandhaghighi");break;case 5:window.open("help.html","_self");break;case 6:window.open("donate.html","_self");break;case 7:window.open("index.html","_self");break;case 8:swal({title:"Hint",text:'<table align="center" style="font-size:37px"><tr><th >Bottom</th><th >Top</th></tr><tr><td>O---O</td><td>OO---</td></tr><tr><td>-O-O-</td><td>O--O-</td></tr><tr><td>OOO--</td><td>-O---</td></tr><tr><td>--OOO</td><td>---O-</td></tr><tr><td>O-OO-</td><td>----O</td></tr><tr><td>-OO-O</td><td>O----</td></tr><tr><td>OO-OO</td><td>--O--</td> </tr></table>',html:!0});break;default:window.open("https://saythanks.io/to/lightsout")}}function getname(){getMobileOperatingSystem(),swal({title:"Enter Your Name",text:"1-10 Character",type:"input",closeOnConfirm:!1,animation:"slide-from-top",inputPlaceholder:"Player Name"},function(e){return""===e?(swal.showInputError("Enter Your Name!"),!1):(player_name=e,e.length>10&&(player_name=player_name.substring(0,10)),void swal({title:"Help",text:'<p style="text-align:justify">The game consists of a 5 by 5 grid of lights. When the game starts, a random number or a stored pattern of these lights is switched on. Pressing any of the lights will toggle it and the four adjacent lights. The goal of the puzzle is to switch all the lights off, preferably in as few button presses as possible. After first touch you have 3 minutes to win as many as possible ;-)</p>',html:!0,customClass:"swal-wide"}))}),init(1)}function init(e){first_init=1,color=CSS_COLOR_NAMES[Math.floor(Math.random()*CSS_COLOR_NAMES.length)].toLowerCase();var t,n,o,a,r,i,l=[];for(o=0,r=document.getElementById("game_name"),r.style.color=color,r.innerHTML="Lights Out Game",a=document.getElementById("move"),i=document.getElementById("reset"),init_flag=!0,2==e&&(reset_counter+=1,i.innerHTML="Reset ("+reset_counter+")");random_init>o;)n=Math.floor(25*Math.random()+1),l.indexOf(n)<0&&(l.push(n),o+=1);for(t=1;26>t;t++)document.getElementById(t.toString()).style.backgroundColor=color,document.getElementById(t.toString()).innerHTML="";for(t=0;t<l.length;t++)reply_click(l[t].toString());a.innerHTML=0,init_flag=!1}function reply_click(e){var t,n;n=document.getElementById("move"),1==first_move&&0==init_flag&&(display=document.querySelector("#time"),startTimer(180,display),first_move=!1),t=parseInt(e),1==first_init&&(25>=t+5&&toggle(t+5),t-5>=1&&toggle(t-5),(t-1)%5==0?toggle(t+1):t%5==0?toggle(t-1):(toggle(t-1),toggle(t+1)),0==init_flag&&(n.innerHTML=parseInt(n.innerHTML)+1,total_move+=1),toggle(t),end_game()),no_move_counter=0}function toggle(e){var t;t=document.getElementById(e.toString()),"white"!=t.style.backgroundColor?(t.style.backgroundColor="white",t.innerHTML=lamp_awsome):(t.style.backgroundColor=color,t.innerHTML="")}function end_game(){var e,t,n;for(t=0,e=1;26>e;e++)if(""!=document.getElementById(e.toString()).innerHTML){t+=1;break}0==t&&(score+=1,n=document.getElementById("win"),n.innerHTML=parseInt(n.innerHTML)+1,random_init=Math.min(random_init+1,15),init(1))}function get_data(){var e=firebase.database().ref("subscription-entries").orderByChild("score").limitToLast(10),t=0;e.on("value",function(e){e.forEach(function(e){var n=e.val().name,o=e.val().score;document.getElementById("N"+(10-t).toString()).innerHTML=n,document.getElementById("S"+(10-t).toString()).innerHTML=o,t+=1})})}function saveToFirebase(e,t,n,o){var a={name:e,score:t,reset:o,move:n};try{firebase.database().ref("subscription-entries").push().set(a).then(function(e){},function(e){console.log("error"+e)})}catch(r){}}function restart_game(){0==reset_counter&&1==first_move?swal("Restart???!!!"):swal({title:"Are you sure?",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes",cancelButtonText:"No",closeOnConfirm:!0,closeOnCancel:!0},function(e){e&&(0==first_move?restart_flag=1:(reset=document.getElementById("reset"),reset.innerHTML="Reset!",reset_counter=0))})}function startTimer(e,t){var n,o,a=e,r=setInterval(function(){n=parseInt(a/60,10),o=parseInt(a%60,10),n=10>n?"0"+n:n,o=10>o?"0"+o:o,t.textContent=n+":"+o,no_move_counter+=1,a==e/2?t.style.color="orange":60==a&&(t.style.color="red"),no_move_counter>=60&&a>100&&(swal({title:"Hurry Up!!!",imageUrl:"images/hurry.png"}),no_move_counter=0),(--a<0||1==restart_flag)&&(0==restart_flag&&(saveToFirebase(player_name,score,total_move,reset_counter),swal({title:"Time's Up",text:"Player Name : "+player_name+"\nScore : "+score.toString()+"\nReset : "+reset_counter.toString()+"\nTotal Move : "+total_move.toString(),imageUrl:"images/timeup.png"})),a=e,restart_config(t),clearInterval(r))},1e3)}function restart_config(e){e.textContent="TI:ME",total_move=0,random_init=1,e.style.color="black",win=document.getElementById("win"),win.innerHTML=0,score=0,reset=document.getElementById("reset"),reset.innerHTML="Reset!",reset_counter=0,first_move=!0,restart_flag=0,init(1)}function getMobileOperatingSystem(){var e=navigator.userAgent||navigator.vendor||window.opera;/windows phone/i.test(e),/android/i.test(e)&&(document.getElementById("smartabanner").style.display="block"),/iPad|iPhone|iPod/.test(e)&&!window.MSStream}function close_banner(){document.getElementById("smartabanner").style.display="none"}var CSS_COLOR_NAMES=["Aqua","Aquamarine","Bisque","Black","BlanchedAlmond","Blue","BlueViolet","Brown","BurlyWood","CadetBlue","Chartreuse","Chocolate","Coral","CornflowerBlue","Crimson","Cyan","DarkBlue","DarkCyan","DarkGoldenRod","DarkGray","DarkGrey","DarkGreen","DarkKhaki","DarkMagenta","DarkOliveGreen","Darkorange","DarkOrchid","DarkRed","DarkSalmon","DarkSeaGreen","DarkSlateBlue","DarkSlateGray","DarkSlateGrey","DarkTurquoise","DarkViolet","DeepPink","DeepSkyBlue","DimGray","DimGrey","DodgerBlue","FireBrick","ForestGreen","Fuchsia","Gainsboro","Gold","GoldenRod","Gray","Grey","Green","GreenYellow","HoneyDew","HotPink","IndianRed","Indigo","Ivory","Khaki","Lavender","LavenderBlush","LawnGreen","LemonChiffon","LightBlue","LightCoral","LightCyan","LightGoldenRodYellow","LightGray","LightGrey","LightGreen","LightPink","LightSalmon","LightSeaGreen","LightSkyBlue","LightSlateGray","LightSlateGrey","LightSteelBlue","LightYellow","Lime","LimeGreen","Linen","Magenta","Maroon","MediumAquaMarine","MediumBlue","MediumOrchid","MediumPurple","MediumSeaGreen","MediumSlateBlue","MediumSpringGreen","MediumTurquoise","MediumVioletRed","MidnightBlue","MintCream","MistyRose","Moccasin","Navy","OldLace","Olive","OliveDrab","Orange","OrangeRed","Orchid","PaleGoldenRod","PaleGreen","PaleTurquoise","PaleVioletRed","PapayaWhip","PeachPuff","Peru","Pink","Plum","PowderBlue","Purple","Red","RosyBrown","RoyalBlue","SaddleBrown","Salmon","SandyBrown","SeaGreen","SeaShell","Sienna","Silver","SkyBlue","SlateBlue","SlateGray","SlateGrey","Snow","SpringGreen","SteelBlue","Tan","Teal","Thistle","Tomato","Turquoise","Violet","Wheat","Yellow","YellowGreen"],color,reset_counter=0,lamp_awsome='<i class="fa fa-lightbulb-o fa-3x" aria-hidden="true"></i>',spinner='<i class="fa fa-spinner fa-spin fa-3x fa-fw"></i>',sound_on='<i class="fa fa-volume-up fa-3x" aria-hidden="true" ></i>',sound_off='<i class="fa fa-volume-off fa-3x" aria-hidden="true"></i>',first_init=0,player_name=null,score=0,first_move=!0,init_flag=!1,total_move=0,restart_flag=0,no_move_counter=0,random_init=1,hr=(new Date).getHours(),music_list=["files/bensound-anewbeginning.mp3","files/bensound-happiness.mp3","files/bensound-tenderness.mp3","files/bensound-cute.mp3","files/bensound-buddy.mp3"],music_random=Math.floor(Math.random()*music_list.length),audio=new Audio(music_list[music_random]),play_status=!1;audio.onended=function(){music_random=Math.floor(Math.random()*music_list.length),audio.src=music_list[music_random],audio.load(),audio.play()};var config={apiKey:"AIzaSyCpXbAwzFbnVtsL-YS1K80fWB1puHYuSxY",authDomain:"lightsout-d1728.firebaseapp.com",databaseURL:"https://lightsout-d1728.firebaseio.com",projectId:"lightsout-d1728",storageBucket:"lightsout-d1728.appspot.com",messagingSenderId:"778988693702"};firebase.initializeApp(config),(hr>=19||6>hr)&&(lamp_awsome='<i class="fa fa-lightbulb-o fa-3x" aria-hidden="true" style="color:gold"></i>');